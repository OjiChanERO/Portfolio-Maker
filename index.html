<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Portfolio Hub</title>
    <style>
    </style>
</head>
<body>

    <div id="app" class="container">
        <p>Loading...</p>
    </div>

    <script>
        const portfolioData = {
            student_name: 'Student User',
            bio: "A dum dum who doesn't know what he is doing right now",
            skills: [
                { id: 'skill-1', name: 'JavaScript', category: 'Technical' },
                { id: 'skill-2', name: 'UI/UX Design', category: 'Design' },
                { id: 'skill-3', name: 'Unaliving Myself', category: 'Life' },
            ],
            projects: [
                { id: 'proj-1', title: 'Interactive Data Visualizer', description: 'A web app to visualize complex datasets.' },
                { id: 'proj-2', title: 'Mobile Recipe Finder', description: 'A cross-platform mobile application.' },
            ],
        };

        // This variable will track which project we are currently editing.
        let editingProjectId = null;

        // --- 2. RENDER FUNCTION ---
        // This single function is responsible for drawing the entire application.
        function render() {
            const app = document.getElementById('app');

            // Find the project being edited, if any.
            const projectToEdit = editingProjectId ? portfolioData.projects.find(p => p.id === editingProjectId) : {};

            // Use a template literal to build the entire HTML structure.
            app.innerHTML = `
                <!-- Header Section -->
                <header>
                    <h1>${portfolioData.student_name}</h1>
                    <p>${portfolioData.bio}</p>
                </header>

                <main>
                    <section id="skills">
                        <h2>My Skills</h2>
                        <div class="card">
                            <ul>
                                ${portfolioData.skills.map(skill => `<li>${skill.name} (${skill.category})</li>`).join('')}
                            </ul>
                        </div>
                    </section>

                    <section id="projects">
                        <h2>My Projects</h2>
                        <div class="card">
                            ${portfolioData.projects.map(p => `
                                <div class="project-item">
                                    <div>
                                        <h3>${p.title}</h3>
                                        <p>${p.description}</p>
                                    </div>
                                    <div class="buttons">
                                        <button class="button button-outline" data-action="edit" data-id="${p.id}">Edit</button>
                                        <button class="button button-danger" data-action="delete" data-id="${p.id}">Delete</button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </section>

                    <section id="project-editor">
                        <h2>${editingProjectId ? 'Edit Project' : 'Add New Project'}</h2>
                        <div class="card">
                            <form id="project-form">
                                <input type="hidden" name="id" value="${projectToEdit?.id || ''}">
                                <div class="form-group">
                                    <label class="form-label" for="title">Project Title</label>
                                    <input class="form-input" type="text" id="title" name="title" value="${projectToEdit?.title || ''}" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="description">Description</label>
                                    <textarea class="form-textarea" id="description" name="description">${projectToEdit?.description || ''}</textarea>
                                </div>
                                <div class="form-actions">
                                    ${editingProjectId ? `<button type="button" class="button button-outline" data-action="cancel-edit">Cancel</button>` : ''}
                                    <button type="submit" class="button">${editingProjectId ? 'Update Project' : 'Save Project'}</button>
                                </div>
                            </form>
                        </div>
                    </section>
                </main>
            `;
        }

        // --- 3. EVENT LISTENERS ---
        // Listen for all clicks on the main app container.
        document.getElementById('app').addEventListener('click', (event) => {
            const action = event.target.dataset.action;
            const id = event.target.dataset.id;

            if (action === 'edit') {
                editingProjectId = id;
                render(); // Re-render to show the data in the form
            }

            if (action === 'delete') {
                if (confirm('Are you sure you want to delete this project?')) {
                    // Filter out the project to delete
                    portfolioData.projects = portfolioData.projects.filter(p => p.id !== id);
                    render(); // Re-render the page
                }
            }

            if (action === 'cancel-edit') {
                editingProjectId = null;
                render(); // Re-render to clear the form
            }
        });

        // Listen for form submissions.
        document.getElementById('app').addEventListener('submit', (event) => {
            if (event.target.id === 'project-form') {
                event.preventDefault(); // Prevent the browser from reloading

                const formData = new FormData(event.target);
                const projectData = Object.fromEntries(formData.entries());

                if (editingProjectId) {
                    // Update an existing project
                    portfolioData.projects = portfolioData.projects.map(p =>
                        p.id === editingProjectId ? { ...p, ...projectData } : p
                    );
                } else {
                    // Add a new project
                    projectData.id = `proj-${Date.now()}`; // Create a unique ID
                    portfolioData.projects.push(projectData);
                }

                editingProjectId = null; // Reset editing state
                render(); // Re-render the whole app to show the changes
            }
        });

        // Call the render function once when the page first loads.
        render();

    </script>

</body>
</html>